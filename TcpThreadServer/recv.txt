1、激光干涉仪使用非科学计数法显示
2、激光干涉仪清零会有很大波动，解决一样（激光干涉仪是周期清零，剩下不完整周期再减去）
3、保存宏动控制中，xyz参数设置，保存上一次设置参数记录，下一次打开子界面的时候显示的是上一次的记录
4、激光干涉仪一直记录数据，可不可以利用缓冲区保存触发前的激光干涉仪数据，然后对缓冲区的数据进行滤波，比如1000个数据进行滤波，这样就不能用带阻滤波，只能用数字滤波。

5、当高于某一个电压的时候，同时采集测头的电压值，和激光干涉仪的xyz数据，然后对激光干涉仪进行滤波，找到同一个时间点的测头数据和激光干涉仪数据对应起来，但激光干涉仪的采集频率和测头的采集频率不一样，如果激光干涉仪的采集频率与测头的采集频率有倍数关系，那我们就可以对测头的采集进行计数，比如激光干涉仪的采集频率是测头的2倍，测头计数到250个数，则激光干涉仪的数据就是500个，要做实验看一下可不可以。

5.10
我今天跟李洁说了一下软件接下来的工作，你积极配合她，主要有：
1）界面测角仪示数隐藏；
2）目前的界面参数清零存在的问题，可能需要加个延时；
3）低速采集滤波前的数保留在隐藏菜单部分，内部人员看；主界面显示滤波后的数据，先看效果，刷新不要太慢就可以。
4）董伟的手柄集成进整机软件，需要的时候调用，测头触发的时候先暂不用手柄。

8次带阻2-100 160-1000 + 8次平均 可以达到1nm

只用平均滤波和原数据没什么差别
差值滤波也是，差值滤波更适用于滤除高频噪声

2023年5月10日22:03:48
用队列做缓冲区保存激光干涉仪数据，然后用一个数组data2保存1000，每次取1000进行滤波，把滤波后的1000个数据每一次都保存到另一个数组data4，然后保存到表格中观察，
结论：与单独滤波前1000个数据得到的滤波后的数据与上面这个方法的到的滤波数据一模一样。
问题：因为用了平均滤波（窗口数为8），所以每1000数据前7个都是0，

队列实时1000滤波（滤波方法要进行正确的选择）
只进行带阻滤波，无法达到几nm的差值，有些地方至少10nm
带阻+差值：阈值选择0.2 0.5 1都是会有一段是一样的数据，数据有效性不行
带阻+中值：与只进行带阻滤波没什么区别，改变窗口也是一样的，
带阻+平均：比只进行带阻效果要好很多
1k数据 带阻0.1-60 160-500  平均8，实时采集1000个数据，滤波效果好，但每1000个前7个数为0，如果是显示的话，会突然变零然后再变数据。
（去0后，会有很大的波动）

平均，差值多弄几次看一下效果，窗口设置10。

带阻+平均8，滑动窗口出一个，进来一个，只取滤波的第一个数据，效果不行，与原数据一致
滑动窗口数据量太小，滤波无效果。并且取多少，在那个地方就有断层

2、不全部弹出，只弹出一半，也有数据断层，原因就是每次取得，和下一次相差很大。导致整一段相差很大。

3、只进行移动平均滤波，随着窗口数的增加滤波效果越好，窗口数为1000个，激光干涉仪数据每出一个数据就保存到一个双端队列中，前面未到1000个每一次也进行平均滤波，最初的滤波效果不是很好，到后面达到窗口数之后，数据滤波效果变得很好。并且滤波处理时间只要2us左右。
窗口数：1000 每一次移动平均滤波 3us
       2000  6us
       3000  9us
窗口数越多滤波效果越好，但用时也越长。
但是如果在移动过程中进行平均滤波，会使得曲线下降，不是原来的位移，并且和窗口数以及运动数据有关
解决方法：每一千个，保存原始数据，以及滤波后的数据，计算原始数据与滤波后的数据的差值，根据差值计算出差值数据的方程，对滤波后的数据进行补偿，把滤波后的数据+截距。
用一个队列保存原始数据。
问题：无法这样操作，因为原始数据是1000个，但我输出一个平均值，无法建立差值。

解决方法：创建一个队列保存原有数据，实时保存1000个，创建一个队列保存滤波后但未进行补偿的数据，也实时保存，这样可以实时得到差值的1000个数据
效果：在一开始数据有误差，首先是偏离，然后慢慢回归原来曲线，但经过大概1.5s，滤波补偿后的数据与原来数据重合了。